# Marsæ—¥å¿—åˆ†æ + AI æ·±åº¦é›†æˆæ–¹æ¡ˆ

**ç‰ˆæœ¬**: v1.0
**æ—¥æœŸ**: 2025-10-16
**çŠ¶æ€**: è®¾è®¡é˜¶æ®µ

---

## ğŸ“‹ æ–¹æ¡ˆæ¦‚è¿°

å°†AIæ™ºèƒ½è¯Šæ–­èƒ½åŠ›**æ— ç¼é›†æˆ**åˆ°ç°æœ‰Marsæ—¥å¿—åˆ†æå·¥å…·ä¸­ï¼Œæ— éœ€æ–°å¢æ ‡ç­¾é¡µã€‚é€šè¿‡**ä¾§è¾¹æ AIåŠ©æ‰‹ + å³é”®èœå•å¢å¼º**çš„æ··åˆæ–¹æ¡ˆï¼Œä¸ºç”¨æˆ·æä¾›æ™ºèƒ½åŒ–çš„æ—¥å¿—åˆ†æä½“éªŒã€‚

### æ ¸å¿ƒä»·å€¼
- ğŸš€ **æ•ˆç‡æå‡**: é—®é¢˜å®šä½æ—¶é—´ä»30åˆ†é’Ÿç¼©çŸ­åˆ°5åˆ†é’Ÿï¼ˆ83%æå‡ï¼‰
- ğŸ§  **æ™ºèƒ½åˆ†æ**: è‡ªåŠ¨è¯†åˆ«å´©æºƒã€æ€§èƒ½é—®é¢˜ã€å¼‚å¸¸æ¨¡å¼
- ğŸ’¬ **è‡ªç„¶äº¤äº’**: æ”¯æŒè‡ªç„¶è¯­è¨€æé—®å’Œå¯¹è¯å¼åˆ†æ
- ğŸ”’ **éšç§å®‰å…¨**: æœ¬åœ°é¢„å¤„ç†ï¼Œæ•æ„Ÿä¿¡æ¯è‡ªåŠ¨è¿‡æ»¤
- ğŸ’° **æˆæœ¬å¯æ§**: æœˆæˆæœ¬<$50ï¼ˆä¸­å°å›¢é˜Ÿï¼‰ï¼Œæ”¯æŒå…è´¹æœ¬åœ°æ¨¡å‹

---

## ğŸ¯ é›†æˆæ–¹å¼

### ä¸‰ç§é›†æˆæ¨¡å¼ï¼ˆæ¨èæ··åˆä½¿ç”¨ï¼‰

#### æ¨¡å¼ä¸€ï¼šä¾§è¾¹æ AIåŠ©æ‰‹ï¼ˆä¸»è¦ï¼‰
åœ¨ä¸»ç•Œé¢å³ä¾§æ·»åŠ **å¯æŠ˜å çš„AIåŠ©æ‰‹é¢æ¿**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Marsæ—¥å¿—åˆ†æå·¥å…·                                    â”‚ AIåŠ©æ‰‹ â–¼  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æ—¥å¿—æŸ¥çœ‹] [æ¨¡å—åˆ†ç»„] [ç»Ÿè®¡ä¿¡æ¯]                   â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  ğŸ¤–      â”‚
â”‚                                                    â”‚  æ™ºèƒ½     â”‚
â”‚  æ—¥å¿—å†…å®¹åŒºåŸŸ                                       â”‚  åŠ©æ‰‹     â”‚
â”‚  (ç°æœ‰çš„æ—¥å¿—åˆ—è¡¨å’Œæœç´¢è¿‡æ»¤åŠŸèƒ½)                     â”‚           â”‚
â”‚                                                    â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”‚
â”‚  [2025-10-15 15:23:45] ERROR NetworkManager...    â”‚  â”‚è¾“å…¥ â”‚  â”‚
â”‚  [2025-10-15 15:23:46] Crash detected...          â”‚  â”‚é—®é¢˜ â”‚  â”‚
â”‚                                                    â”‚  â””â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                    â”‚           â”‚
â”‚                                                    â”‚  [å‘é€]   â”‚
â”‚                                                    â”‚           â”‚
â”‚                                                    â”‚  å¿«æ·:    â”‚
â”‚                                                    â”‚  â€¢åˆ†æå´©æºƒ â”‚
â”‚                                                    â”‚  â€¢æ€§èƒ½è¯Šæ–­ â”‚
â”‚                                                    â”‚  â€¢é—®é¢˜æ€»ç»“ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹ç‚¹**ï¼š
- âœ… ä¸æ”¹å˜ç°æœ‰å¸ƒå±€
- âœ… å¯æŠ˜å ï¼Œä¸å ç”¨ç©ºé—´
- âœ… ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼ˆè‡ªåŠ¨è¯»å–å½“å‰æ˜¾ç¤ºçš„æ—¥å¿—ï¼‰
- âœ… å¿«æ·æ“ä½œæŒ‰é’®

#### æ¨¡å¼äºŒï¼šæ™ºèƒ½æµ®åŠ¨æŒ‰é’®
åœ¨æ—¥å¿—å†…å®¹åŒºåŸŸæ·»åŠ **æµ®åŠ¨AIæŒ‰é’®**ï¼Œç‚¹å‡»å¼¹å‡ºåˆ†æèœå•ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—¥å¿—å†…å®¹                                    [ğŸ¤– AI] â”‚ â† æµ®åŠ¨æŒ‰é’®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [2025-10-15 15:23:45] ERROR NetworkManager...    â”‚
â”‚  [2025-10-15 15:23:46] Crash detected...          â”‚
â”‚  ...                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‚¹å‡» [ğŸ¤– AI] åå¼¹å‡ºèœå•ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” åˆ†æå½“å‰æ—¥å¿—      â”‚
â”‚ ğŸš¨ æ£€æµ‹å´©æºƒé—®é¢˜      â”‚
â”‚ âš¡ æ€§èƒ½è¯Šæ–­          â”‚
â”‚ ğŸ’¬ è‡ªå®šä¹‰æé—®...     â”‚
â”‚ âš™ï¸  AIè®¾ç½®           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹ç‚¹**ï¼š
- âœ… æœ€å°åŒ–ç•Œé¢æ”¹åŠ¨
- âœ… æŒ‰éœ€ä½¿ç”¨ï¼Œä¸å¹²æ‰°æ­£å¸¸æµç¨‹
- âœ… å¿«é€Ÿè§¦è¾¾

#### æ¨¡å¼ä¸‰ï¼šå³é”®èœå•å¢å¼ºï¼ˆè¾…åŠ©ï¼‰
åœ¨æ—¥å¿—åˆ—è¡¨å³é”®èœå•ä¸­æ·»åŠ AIé€‰é¡¹ï¼š

```
é€‰ä¸­æ—¥å¿— â†’ å³é”® â†’
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¤åˆ¶                â”‚
â”‚ å¯¼å‡ºé€‰ä¸­è¡Œ          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ğŸ¤– AIåˆ†ææ­¤æ—¥å¿—     â”‚ â† æ–°å¢
â”‚ ğŸ¤– AIè§£é‡Šé”™è¯¯åŸå›    â”‚ â† æ–°å¢
â”‚ ğŸ¤– AIæŸ¥æ‰¾ç›¸å…³æ—¥å¿—   â”‚ â† æ–°å¢
â”‚ ğŸ¤– AIæä¾›ä¿®å¤å»ºè®®   â”‚ â† æ–°å¢
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹ç‚¹**ï¼š
- âœ… é›¶ç•Œé¢å ç”¨
- âœ… ç¬¦åˆç”¨æˆ·ä¹ æƒ¯
- âœ… ç²¾å‡†åˆ†æé€‰ä¸­å†…å®¹

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GUIä¸»ç•Œé¢                          â”‚
â”‚  mars_log_analyzer_pro.py / mars_log_analyzer_modular.py
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¾§è¾¹æ AIåŠ©æ‰‹ + å³é”®èœå•å¢å¼º                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AIè¯Šæ–­æ¨¡å— (ai_diagnosis/)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ai_client.py - AIæ¥å£é€‚é…å±‚                 â”‚  â”‚
â”‚  â”‚  â€¢ ClaudeClient                              â”‚  â”‚
â”‚  â”‚  â€¢ OpenAIClient                              â”‚  â”‚
â”‚  â”‚  â€¢ OllamaClient (æœ¬åœ°)                       â”‚  â”‚
â”‚  â”‚  â€¢ AIClientFactory                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  log_preprocessor.py - æ—¥å¿—é¢„å¤„ç†           â”‚  â”‚
â”‚  â”‚  â€¢ extract_crash_logs()                      â”‚  â”‚
â”‚  â”‚  â€¢ extract_error_patterns()                  â”‚  â”‚
â”‚  â”‚  â€¢ build_timeline()                          â”‚  â”‚
â”‚  â”‚  â€¢ summarize_logs()                          â”‚  â”‚
â”‚  â”‚  â€¢ filter_sensitive_info()                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  prompt_templates.py - æç¤ºè¯æ¨¡æ¿åº“         â”‚  â”‚
â”‚  â”‚  â€¢ CRASH_ANALYSIS_PROMPT                     â”‚  â”‚
â”‚  â”‚  â€¢ PERFORMANCE_ANALYSIS_PROMPT               â”‚  â”‚
â”‚  â”‚  â€¢ ISSUE_SUMMARY_PROMPT                      â”‚  â”‚
â”‚  â”‚  â€¢ INTERACTIVE_QA_PROMPT                     â”‚  â”‚
â”‚  â”‚  â€¢ ERROR_EXPLANATION_PROMPT                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  config.py - é…ç½®ç®¡ç†                        â”‚  â”‚
â”‚  â”‚  â€¢ åŠ è½½/ä¿å­˜é…ç½®æ–‡ä»¶                         â”‚  â”‚
â”‚  â”‚  â€¢ API Keyç®¡ç†                               â”‚  â”‚
â”‚  â”‚  â€¢ æ¨¡å‹é€‰æ‹©                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—è¯´æ˜

#### 1. ai_client.py - AIå®¢æˆ·ç«¯é€‚é…å±‚
**èŒè´£**: ç»Ÿä¸€çš„AIæœåŠ¡æ¥å£ï¼Œæ”¯æŒå¤šç§AIæä¾›å•†

**æ ¸å¿ƒç±»**:
```python
class AIClient(ABC):
    """AIå®¢æˆ·ç«¯æŠ½è±¡åŸºç±»"""
    @abstractmethod
    def ask(self, prompt: str, **kwargs) -> str:
        """å‘é€æç¤ºè¯ï¼Œè¿”å›AIå“åº”"""
        pass

class ClaudeClient(AIClient):
    """Claude APIå®¢æˆ·ç«¯"""
    def __init__(self, api_key: str, model: str = "claude-3-5-sonnet-20241022")
    def ask(self, prompt: str) -> str

class OpenAIClient(AIClient):
    """OpenAI APIå®¢æˆ·ç«¯"""
    def __init__(self, api_key: str, model: str = "gpt-4")
    def ask(self, prompt: str) -> str

class OllamaClient(AIClient):
    """æœ¬åœ°Ollamaå®¢æˆ·ç«¯ï¼ˆå…è´¹ç¦»çº¿æ–¹æ¡ˆï¼‰"""
    def __init__(self, model: str = "llama3", base_url: str = "http://localhost:11434")
    def ask(self, prompt: str) -> str

class AIClientFactory:
    """å·¥å‚ç±»ï¼Œæ ¹æ®é…ç½®åˆ›å»ºå®¢æˆ·ç«¯"""
    @staticmethod
    def create(service: str, api_key: str = None, model: str = None) -> AIClient
```

**æ–‡ä»¶ä½ç½®**: `gui/modules/ai_diagnosis/ai_client.py`

#### 2. log_preprocessor.py - æ—¥å¿—é¢„å¤„ç†
**èŒè´£**: å°†åŸå§‹æ—¥å¿—è½¬æ¢ä¸ºAIå¯ç†è§£çš„æ ¼å¼ï¼Œå¹¶è¿›è¡Œéšç§ä¿æŠ¤

**æ ¸å¿ƒåŠŸèƒ½**:
```python
class LogPreprocessor:
    """æ—¥å¿—é¢„å¤„ç†å™¨"""

    def extract_crash_logs(self, entries: List[LogEntry]) -> List[CrashInfo]:
        """æå–å´©æºƒæ—¥å¿—åŠä¸Šä¸‹æ–‡"""

    def extract_error_patterns(self, entries: List[LogEntry]) -> List[ErrorPattern]:
        """è¯†åˆ«é«˜é¢‘é”™è¯¯æ¨¡å¼"""

    def build_timeline(self, entries: List[LogEntry], center_time: datetime,
                      window: int = 60) -> List[LogEntry]:
        """æ„å»ºæ—¶é—´çº¿ï¼ˆå´©æºƒå‰åNç§’çš„æ—¥å¿—ï¼‰"""

    def summarize_logs(self, entries: List[LogEntry], max_tokens: int = 10000) -> str:
        """æ—¥å¿—æ‘˜è¦ï¼ˆæ™ºèƒ½å‹ç¼©ï¼Œæ§åˆ¶Tokenæ•°é‡ï¼‰"""

    def filter_sensitive_info(self, text: str) -> str:
        """è¿‡æ»¤æ•æ„Ÿä¿¡æ¯ï¼ˆTokenã€å¯†é’¥ã€ç”¨æˆ·IDç­‰ï¼‰"""

class PrivacyFilter:
    """éšç§ä¿¡æ¯è¿‡æ»¤å™¨"""
    PATTERNS = [
        (r'token["\s:=]+([a-zA-Z0-9\-_]+)', 'TOKEN_***'),
        (r'key["\s:=]+([a-zA-Z0-9\-_]+)', 'KEY_***'),
        (r'user_id["\s:=]+(\d+)', 'USER_***'),
        (r'\d{11}', 'PHONE_***'),
        (r'[\w\.-]+@[\w\.-]+', 'EMAIL_***'),
    ]

    def filter(self, text: str) -> str:
        """åº”ç”¨æ‰€æœ‰è¿‡æ»¤è§„åˆ™"""
```

**æ–‡ä»¶ä½ç½®**: `gui/modules/ai_diagnosis/log_preprocessor.py`

#### 3. prompt_templates.py - æç¤ºè¯æ¨¡æ¿åº“
**èŒè´£**: ç®¡ç†å’Œä¼˜åŒ–å„ç±»åˆ†æåœºæ™¯çš„æç¤ºè¯

**æ ¸å¿ƒæ¨¡æ¿**:
```python
class PromptTemplates:
    """æç¤ºè¯æ¨¡æ¿åº“"""

    # å´©æºƒåˆ†æ
    CRASH_ANALYSIS_PROMPT = """
ä½ æ˜¯ä¸€ä½æ‹¥æœ‰10å¹´ä»¥ä¸Šç»éªŒçš„ç§»åŠ¨åº”ç”¨å¼€å‘ä¸“å®¶ï¼Œç²¾é€šiOSå’ŒAndroidå¹³å°çš„å´©æºƒåˆ†æã€‚

## ä»»åŠ¡
åˆ†æä»¥ä¸‹åº”ç”¨å´©æºƒæ—¥å¿—ï¼Œæä¾›è¯¦ç»†çš„è¯Šæ–­æŠ¥å‘Šã€‚

## å´©æºƒä¿¡æ¯
**æ—¶é—´**: {crash_time}
**æ¨¡å—**: {module_name}
**çº§åˆ«**: {log_level}

**å´©æºƒå †æ ˆ**:
```
{crash_stack}
```

**å´©æºƒå‰ä¸Šä¸‹æ–‡æ—¥å¿—ï¼ˆå‰30ç§’ï¼‰**:
```
{context_before}
```

## è¦æ±‚
è¯·æŒ‰ä»¥ä¸‹ç»“æ„åˆ†æï¼Œç”¨ä¸­æ–‡å›ç­”ï¼š

### 1. é—®é¢˜æ¦‚è¿°ï¼ˆ1-2å¥è¯ï¼‰
### 2. æŠ€æœ¯åˆ†æ
- **å´©æºƒç±»å‹**:
- **å´©æºƒä½ç½®**:
- **è§¦å‘æ¡ä»¶**:

### 3. æ ¹å› åˆ†æ
### 4. å½±å“èŒƒå›´è¯„ä¼°
- ä¸¥é‡ç¨‹åº¦: [ä½/ä¸­/é«˜/ä¸¥é‡]
- å½±å“ç”¨æˆ·: [å°‘æ•°/éƒ¨åˆ†/å¤§é‡]

### 5. è§£å†³æ–¹æ¡ˆ
### 6. é¢„é˜²æªæ–½

ä½¿ç”¨Markdownæ ¼å¼ã€‚
"""

    # æ€§èƒ½åˆ†æ
    PERFORMANCE_ANALYSIS_PROMPT = """
ä½ æ˜¯æ€§èƒ½ä¼˜åŒ–ä¸“å®¶ã€‚è¯·åˆ†æä»¥ä¸‹æ€§èƒ½é—®é¢˜ï¼š

## æ…¢é€Ÿæ“ä½œç»Ÿè®¡
{slow_operations}

## æ€§èƒ½ç›¸å…³æ—¥å¿—
```
{perf_logs}
```

è¯·åˆ†æï¼š
1. ä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆ
2. æ…¢é€Ÿæ“ä½œçš„å…·ä½“ä½ç½®
3. ä¼˜åŒ–å»ºè®®ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰

ç”¨ä¸­æ–‡å›ç­”ï¼ŒMarkdownæ ¼å¼ã€‚
"""

    # é—®é¢˜æ€»ç»“
    ISSUE_SUMMARY_PROMPT = """
ä½ æ˜¯æ—¥å¿—åˆ†æä¸“å®¶ã€‚è¯·æ ¹æ®ä»¥ä¸‹ç»Ÿè®¡æ•°æ®ç”Ÿæˆé—®é¢˜æ€»ç»“æŠ¥å‘Šï¼š

## æ—¥å¿—ç»Ÿè®¡
- æ€»æ—¥å¿—æ•°: {total}
- å´©æºƒæ•°: {crashes}
- é”™è¯¯æ•°: {errors}
- è­¦å‘Šæ•°: {warnings}

## é«˜é¢‘é”™è¯¯ä¿¡æ¯
{top_errors}

è¯·ç”Ÿæˆï¼š
1. æ•´ä½“å¥åº·åº¦è¯„ä¼°ï¼ˆè‰¯å¥½/ä¸€èˆ¬/ä¸¥é‡ï¼‰
2. éœ€è¦ä¼˜å…ˆå¤„ç†çš„é—®é¢˜ï¼ˆTop 3ï¼‰
3. æ½œåœ¨é£é™©ç‚¹
4. è¡ŒåŠ¨å»ºè®®

ç”¨ä¸­æ–‡å›ç­”ï¼ŒMarkdownæ ¼å¼ã€‚
"""

    # äº¤äº’å¼é—®ç­”
    INTERACTIVE_QA_PROMPT = """
ä½ æ˜¯Marsæ—¥å¿—åˆ†æåŠ©æ‰‹ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£å’Œè¯Šæ–­åº”ç”¨æ—¥å¿—ã€‚

## å½“å‰æ—¥å¿—ä¸Šä¸‹æ–‡
- æ—¥å¿—æ•°é‡: {total_logs}
- æ—¶é—´èŒƒå›´: {time_range}
- å´©æºƒæ•°: {crash_count}
- é”™è¯¯æ•°: {error_count}

## æ—¥å¿—æ‘˜è¦
```
{relevant_logs}
```

## ç”¨æˆ·é—®é¢˜
{user_question}

## å›ç­”è¦æ±‚
1. ç›´æ¥å›ç­”ç”¨æˆ·é—®é¢˜ï¼Œç®€æ´æ˜äº†
2. å¼•ç”¨å…·ä½“çš„æ—¥å¿—è¡Œä½œä¸ºè¯æ®
3. å¦‚æœæ—¥å¿—ä¿¡æ¯ä¸è¶³ï¼Œæ˜ç¡®è¯´æ˜
4. ä½¿ç”¨ä¸­æ–‡å›ç­”

è¯·å›ç­”ï¼š
"""

    # é”™è¯¯è§£é‡Š
    ERROR_EXPLANATION_PROMPT = """
ä»¥ä¸‹æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—ï¼š

```
{error_log}
```

è¯·è¯¦ç»†è§£é‡Šï¼š
1. è¿™ä¸ªé”™è¯¯æ˜¯ä»€ä¹ˆæ„æ€ï¼ˆé€šä¿—æ˜“æ‡‚ï¼‰
2. é€šå¸¸æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„
3. å¦‚ä½•å®šä½å…·ä½“åŸå› 
4. å¦‚ä½•ä¿®å¤ï¼ˆä»£ç ç¤ºä¾‹ï¼‰

ç”¨ä¸­æ–‡å›ç­”ï¼Œé€‚åˆåˆçº§å¼€å‘è€…ç†è§£ã€‚
"""

    @classmethod
    def format_crash_analysis(cls, crash_info: dict) -> str:
        """æ ¼å¼åŒ–å´©æºƒåˆ†ææç¤ºè¯"""
        return cls.CRASH_ANALYSIS_PROMPT.format(**crash_info)

    @classmethod
    def format_performance_analysis(cls, perf_info: dict) -> str:
        """æ ¼å¼åŒ–æ€§èƒ½åˆ†ææç¤ºè¯"""
        return cls.PERFORMANCE_ANALYSIS_PROMPT.format(**perf_info)

    # ... å…¶ä»–æ ¼å¼åŒ–æ–¹æ³•
```

**æ–‡ä»¶ä½ç½®**: `gui/modules/ai_diagnosis/prompt_templates.py`

#### 4. config.py - é…ç½®ç®¡ç†
**èŒè´£**: ç®¡ç†AIæœåŠ¡é…ç½®ï¼ŒæŒä¹…åŒ–ç”¨æˆ·è®¾ç½®

```python
class AIConfig:
    """AIé…ç½®ç®¡ç†"""

    CONFIG_FILE = "gui/ai_config.json"

    DEFAULT_CONFIG = {
        "ai_service": "Claude",
        "api_key": "",
        "model": "claude-3-5-sonnet-20241022",
        "auto_detect": True,
        "auto_summary": False,
        "privacy_filter": True,
        "max_tokens": 10000
    }

    @classmethod
    def load(cls) -> dict:
        """åŠ è½½é…ç½®"""

    @classmethod
    def save(cls, config: dict):
        """ä¿å­˜é…ç½®"""

    @classmethod
    def get_api_key(cls) -> str:
        """è·å–API Keyï¼ˆæ”¯æŒç¯å¢ƒå˜é‡ï¼‰"""
        # ä¼˜å…ˆç¯å¢ƒå˜é‡ï¼Œå…¶æ¬¡é…ç½®æ–‡ä»¶
```

**æ–‡ä»¶ä½ç½®**: `gui/modules/ai_diagnosis/config.py`

---

## ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. å´©æºƒåˆ†æï¼ˆä¸€é”®æ“ä½œï¼‰

**åŠŸèƒ½æè¿°**: è‡ªåŠ¨æå–æ‰€æœ‰å´©æºƒæ—¥å¿—ï¼Œåˆ†æåŸå› ï¼Œæä¾›ä¿®å¤å»ºè®®

**å®ç°é€»è¾‘**:
```python
def analyze_crashes(self):
    """åˆ†ææ‰€æœ‰å´©æºƒæ—¥å¿—"""
    # 1. ä»å½“å‰æ—¥å¿—ä¸­æå–å´©æºƒä¿¡æ¯
    crash_logs = [entry for entry in self.all_log_entries
                  if entry.module == "Crash" or "crash" in entry.content.lower()]

    # 2. è·å–å´©æºƒä¸Šä¸‹æ–‡ï¼ˆå‰å10æ¡æ—¥å¿—ï¼‰
    for crash in crash_logs[:5]:  # æœ€å¤šåˆ†æ5ä¸ª
        context = self._get_log_context(crash, before=10, after=5)

    # 3. æ„å»ºæç¤ºè¯
    prompt = PromptTemplates.format_crash_analysis({
        'crash_time': crash.timestamp,
        'module_name': crash.module,
        'crash_stack': crash.content,
        'context_before': self._format_logs(context['before'])
    })

    # 4. å¼‚æ­¥è°ƒç”¨AIï¼ˆé¿å…é˜»å¡UIï¼‰
    threading.Thread(target=self._analyze_with_ai,
                    args=(prompt, "å´©æºƒåˆ†æ")).start()
```

**è¾“å‡ºç¤ºä¾‹**:
```markdown
## å´©æºƒåˆ†ææŠ¥å‘Š

### é—®é¢˜æ¦‚è¿°
åº”ç”¨åœ¨ç½‘ç»œè¯·æ±‚åˆå§‹åŒ–æ—¶å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNullPointerExceptionï¼‰

### æŠ€æœ¯åˆ†æ
- **å´©æºƒç±»å‹**: NullPointerException
- **å´©æºƒä½ç½®**: NetworkManager.init() line 45
- **è§¦å‘æ¡ä»¶**: ç½‘ç»œçŠ¶æ€æœªå°±ç»ªæ—¶è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•

### æ ¹å› åˆ†æ
ä»£ç åœ¨åˆå§‹åŒ–NetworkManageræ—¶æœªæ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€ï¼Œç›´æ¥è®¿é—®äº†æœªåˆå§‹åŒ–çš„socketå¯¹è±¡ã€‚

### å½±å“èŒƒå›´è¯„ä¼°
- ä¸¥é‡ç¨‹åº¦: é«˜
- å½±å“ç”¨æˆ·: éƒ¨åˆ†ï¼ˆçº¦15%å¯åŠ¨æ—¶ç½‘ç»œæœªå°±ç»ªçš„ç”¨æˆ·ï¼‰

### è§£å†³æ–¹æ¡ˆ
**æ–¹æ¡ˆä¸€ï¼ˆå¿«é€Ÿä¿®å¤ï¼‰**:
åœ¨åˆå§‹åŒ–å‰æ·»åŠ ç½‘ç»œçŠ¶æ€æ£€æŸ¥ï¼š
...ä»£ç ç¤ºä¾‹...

**æ–¹æ¡ˆäºŒï¼ˆæ ¹æ²»ï¼‰**:
é‡æ„NetworkManagerä¸ºæ‡’åŠ è½½æ¨¡å¼
...ä»£ç ç¤ºä¾‹...

### é¢„é˜²æªæ–½
1. æ·»åŠ ç½‘ç»œçŠ¶æ€ç›‘å¬
2. å®ç°ä¼˜é›…é™çº§
3. å¢åŠ å•å…ƒæµ‹è¯•è¦†ç›–
```

### 2. æ€§èƒ½è¯Šæ–­

**åŠŸèƒ½æè¿°**: è¯†åˆ«æ…¢é€Ÿæ“ä½œã€å†…å­˜é—®é¢˜ã€ANRç­‰æ€§èƒ½ç“¶é¢ˆ

**å®ç°é€»è¾‘**:
```python
def analyze_performance(self):
    """åˆ†ææ€§èƒ½é—®é¢˜"""
    # 1. æå–æ€§èƒ½ç›¸å…³æ—¥å¿—
    perf_keywords = ['slow', 'timeout', 'lag', 'anr', 'memory', 'å¡é¡¿', 'è¶…æ—¶']
    perf_logs = [entry for entry in self.all_log_entries
                 if any(kw in entry.content.lower() for kw in perf_keywords)]

    # 2. åˆ†ææ…¢é€Ÿæ“ä½œï¼ˆè§£æè€—æ—¶ä¿¡æ¯ï¼‰
    slow_ops = self._analyze_slow_operations()  # æå–"xxx took 2500ms"ç­‰

    # 3. æ„å»ºæç¤ºè¯
    prompt = PromptTemplates.format_performance_analysis({
        'slow_operations': slow_ops,
        'perf_logs': self._format_logs(perf_logs[:100])
    })

    # 4. å¼‚æ­¥è°ƒç”¨AI
    threading.Thread(target=self._analyze_with_ai,
                    args=(prompt, "æ€§èƒ½è¯Šæ–­")).start()
```

### 3. é—®é¢˜æ€»ç»“ï¼ˆæ™ºèƒ½æ‘˜è¦ï¼‰

**åŠŸèƒ½æè¿°**: ç”Ÿæˆæ•´ä½“æ—¥å¿—å¥åº·åº¦æŠ¥å‘Šï¼Œä¼˜å…ˆçº§æ’åºé—®é¢˜

**å®ç°é€»è¾‘**:
```python
def summarize_issues(self):
    """ç”Ÿæˆé—®é¢˜æ€»ç»“æŠ¥å‘Š"""
    # 1. ç»Ÿè®¡å„ç±»é—®é¢˜
    stats = {
        'total': len(self.all_log_entries),
        'crashes': sum(1 for e in self.all_log_entries if e.module == "Crash"),
        'errors': sum(1 for e in self.all_log_entries if e.level == "ERROR"),
        'warnings': sum(1 for e in self.all_log_entries if e.level == "WARNING"),
    }

    # 2. é«˜é¢‘é”™è¯¯ç»Ÿè®¡
    from collections import Counter
    error_logs = [e for e in self.all_log_entries if e.level == "ERROR"]
    top_errors = Counter(e.content[:50] for e in error_logs).most_common(10)

    # 3. æ„å»ºæç¤ºè¯
    prompt = PromptTemplates.format_issue_summary(stats)

    # 4. å¼‚æ­¥è°ƒç”¨AI
    threading.Thread(target=self._analyze_with_ai,
                    args=(prompt, "é—®é¢˜æ€»ç»“")).start()
```

### 4. æ™ºèƒ½æœç´¢ï¼ˆè‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼‰

**åŠŸèƒ½æè¿°**: ç”¨æˆ·ç”¨è‡ªç„¶è¯­è¨€æè¿°é—®é¢˜ï¼ŒAIæä¾›æœç´¢å»ºè®®å¹¶è‡ªåŠ¨åº”ç”¨è¿‡æ»¤å™¨

**ç¤ºä¾‹å¯¹è¯**:
```
ç”¨æˆ·: "æ‰¾å‡ºæ‰€æœ‰ç½‘ç»œè¶…æ—¶çš„æ—¥å¿—"

AIåŠ©æ‰‹:
## æœç´¢å»ºè®®
- å…³é”®è¯: timeout network request
- æ—¥å¿—çº§åˆ«: ERROR, WARNING
- æ—¶é—´èŒƒå›´: å…¨éƒ¨

## ç›´æ¥å›ç­”
åœ¨æ—¥å¿—ä¸­æ£€æµ‹åˆ° 23 æ¬¡ç½‘ç»œè¶…æ—¶ï¼š
- NetworkService.request() - 15æ¬¡
- ImageLoader.download() - 8æ¬¡

å·²è‡ªåŠ¨åº”ç”¨è¿‡æ»¤å™¨ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—åˆ—è¡¨ã€‚
```

**å®ç°é€»è¾‘**:
```python
def smart_search(self):
    """æ™ºèƒ½æœç´¢"""
    # 1. å¼¹å‡ºè¾“å…¥æ¡†
    question = simpledialog.askstring("æ™ºèƒ½æœç´¢", "è¯·æè¿°æ‚¨è¦æŸ¥æ‰¾çš„é—®é¢˜")

    # 2. æ„å»ºæç¤ºè¯ï¼ˆåŒ…å«æ—¥å¿—ä¸Šä¸‹æ–‡ï¼‰
    prompt = f"""
ç”¨æˆ·æƒ³è¦æŸ¥æ‰¾ï¼š"{question}"

å½“å‰æ—¥å¿—æ–‡ä»¶ä¿¡æ¯ï¼š
- æ€»æ—¥å¿—æ•°: {len(self.all_log_entries)}
- ä¸»è¦æ¨¡å—: {', '.join(set(e.module for e in self.all_log_entries[:100]))}

è¯·æä¾›ï¼š
1. æœç´¢å»ºè®®ï¼ˆå…³é”®è¯ã€æ—¥å¿—çº§åˆ«ï¼‰
2. å¦‚æœèƒ½ç›´æ¥å›ç­”ï¼Œä»æ—¥å¿—ä¸­æå–ç›¸å…³ä¿¡æ¯

ç”¨ä¸­æ–‡å›ç­”ã€‚
"""

    # 3. è°ƒç”¨AI
    response = ai_client.ask(prompt)

    # 4. è§£æå»ºè®®ï¼Œè‡ªåŠ¨åº”ç”¨è¿‡æ»¤å™¨
    self._apply_search_suggestions(response)
```

### 5. è‡ªç”±å¯¹è¯

**åŠŸèƒ½æè¿°**: æ”¯æŒç”¨æˆ·éšæ—¶æé—®ï¼ŒAIåŸºäºå½“å‰æ—¥å¿—ä¸Šä¸‹æ–‡å›ç­”

**ç¤ºä¾‹å¯¹è¯**:
```
ç”¨æˆ·: "ä¸ºä»€ä¹ˆåº”ç”¨åœ¨15:23è¿™ä¸ªæ—¶é—´ç‚¹å´©æºƒäº†ï¼Ÿ"

AIåŠ©æ‰‹:
æ ¹æ®æ—¥å¿—åˆ†æï¼Œ15:23:45æ—¶å‘ç”Ÿäº†ç½‘ç»œè¯·æ±‚è¶…æ—¶ï¼Œå¯¼è‡´åç»­çš„JSONè§£æå¤±è´¥ã€‚
å…·ä½“åŸå› æ˜¯ï¼š

1. 15:23:40 - å‘èµ·ç½‘ç»œè¯·æ±‚åˆ°api.example.com
2. 15:23:45 - è¯·æ±‚è¶…æ—¶ï¼ˆè®¾ç½®çš„5ç§’è¶…æ—¶ï¼‰
3. 15:23:45 - å°è¯•è§£æç©ºå“åº”ï¼Œå¯¼è‡´å´©æºƒ

å»ºè®®æ£€æŸ¥ï¼š
- ç½‘ç»œè¿æ¥çŠ¶æ€
- APIæœåŠ¡å™¨å“åº”æ—¶é—´
- è¶…æ—¶è®¾ç½®æ˜¯å¦åˆç†
```

**å®ç°é€»è¾‘**:
```python
def ask_ai(self):
    """å¤„ç†ç”¨æˆ·è‡ªç”±æé—®"""
    question = self.question_entry.get().strip()

    # 1. æ˜¾ç¤ºç”¨æˆ·é—®é¢˜
    self.append_chat("æ‚¨", question)

    # 2. è·å–å½“å‰æ˜¾ç¤ºçš„æ—¥å¿—ä½œä¸ºä¸Šä¸‹æ–‡
    current_logs = self.filtered_log_entries if hasattr(self, 'filtered_log_entries') else self.all_log_entries

    # 3. æ™ºèƒ½é‡‡æ ·ï¼ˆå¦‚æœæ—¥å¿—å¤ªå¤šï¼‰
    if len(current_logs) > 200:
        sample_logs = current_logs[::len(current_logs)//200]
    else:
        sample_logs = current_logs

    # 4. æ„å»ºæç¤ºè¯
    prompt = PromptTemplates.format_interactive_qa({
        'total_logs': len(self.all_log_entries),
        'time_range': f"{current_logs[0].timestamp} ~ {current_logs[-1].timestamp}",
        'relevant_logs': self._format_logs(sample_logs),
        'user_question': question
    })

    # 5. å¼‚æ­¥è°ƒç”¨AI
    threading.Thread(target=self._analyze_with_ai,
                    args=(prompt, "å¯¹è¯")).start()
```

---

## ğŸ¨ UIç•Œé¢è®¾è®¡

### ä¾§è¾¹æ AIåŠ©æ‰‹ï¼ˆè¯¦ç»†å¸ƒå±€ï¼‰

```python
def create_ai_assistant_ui(self):
    """åˆ›å»ºAIåŠ©æ‰‹ç•Œé¢"""

    # ä¸»å®¹å™¨ï¼ˆå¯æŠ˜å ï¼‰
    self.main_paned_window = ttk.PanedWindow(self, orient=tk.HORIZONTAL)
    self.main_paned_window.pack(fill=tk.BOTH, expand=True)

    # å·¦ä¾§ï¼šåŸæœ‰çš„æ—¥å¿—åˆ†æåŒºåŸŸ
    self.log_frame = ttk.Frame(self.main_paned_window)
    self.main_paned_window.add(self.log_frame, weight=4)

    # å³ä¾§ï¼šAIåŠ©æ‰‹é¢æ¿
    self.ai_frame = ttk.Frame(self.main_paned_window)
    self.main_paned_window.add(self.ai_frame, weight=1)

    # ==================== AIåŠ©æ‰‹æ ‡é¢˜æ  ====================
    header = ttk.Frame(self.ai_frame)
    header.pack(fill=tk.X, padx=5, pady=5)

    ttk.Label(header, text="ğŸ¤– AIåŠ©æ‰‹", font=("", 12, "bold")).pack(side=tk.LEFT)

    # æŠ˜å æŒ‰é’®
    self.toggle_btn = ttk.Button(header, text="â—€", width=3,
                                 command=self.toggle_ai_panel)
    self.toggle_btn.pack(side=tk.RIGHT)

    # ==================== å¿«æ·æ“ä½œåŒº ====================
    quick_actions = ttk.LabelFrame(self.ai_frame, text="å¿«æ·æ“ä½œ", padding=10)
    quick_actions.pack(fill=tk.X, padx=5, pady=5)

    ttk.Button(quick_actions, text="ğŸš¨ åˆ†æå´©æºƒ",
              command=self.analyze_crashes).pack(fill=tk.X, pady=2)
    ttk.Button(quick_actions, text="âš¡ æ€§èƒ½è¯Šæ–­",
              command=self.analyze_performance).pack(fill=tk.X, pady=2)
    ttk.Button(quick_actions, text="ğŸ“Š é—®é¢˜æ€»ç»“",
              command=self.summarize_issues).pack(fill=tk.X, pady=2)
    ttk.Button(quick_actions, text="ğŸ” æ™ºèƒ½æœç´¢",
              command=self.smart_search).pack(fill=tk.X, pady=2)

    # ==================== å¯¹è¯åŒºåŸŸ ====================
    chat_frame = ttk.LabelFrame(self.ai_frame, text="å¯¹è¯", padding=10)
    chat_frame.pack(fill=tk.BOTH, expand=True, padx=5, pady=5)

    # å¯¹è¯å†å²ï¼ˆå¯æ»šåŠ¨ï¼‰
    self.chat_history = scrolledtext.ScrolledText(
        chat_frame, height=15, wrap=tk.WORD, state=tk.DISABLED
    )
    self.chat_history.pack(fill=tk.BOTH, expand=True)

    # é…ç½®æ ·å¼
    self.chat_history.tag_config("user", font=("", 10, "bold"), foreground="blue")
    self.chat_history.tag_config("ai", font=("", 10), foreground="green")
    self.chat_history.tag_config("system", font=("", 9, "italic"), foreground="gray")

    # è¾“å…¥åŒº
    input_frame = ttk.Frame(chat_frame)
    input_frame.pack(fill=tk.X, pady=(5, 0))

    self.question_entry = ttk.Entry(input_frame)
    self.question_entry.pack(side=tk.LEFT, fill=tk.X, expand=True)
    self.question_entry.bind('<Return>', lambda e: self.ask_ai())

    ttk.Button(input_frame, text="å‘é€", command=self.ask_ai).pack(side=tk.RIGHT, padx=(5, 0))

    # ==================== çŠ¶æ€æ  ====================
    self.ai_status = ttk.Label(self.ai_frame, text="å°±ç»ª âœ“",
                               foreground="green", font=("", 9))
    self.ai_status.pack(side=tk.BOTTOM, fill=tk.X, padx=5, pady=2)

def toggle_ai_panel(self):
    """æŠ˜å /å±•å¼€AIé¢æ¿"""
    # å®ç°æŠ˜å é€»è¾‘
    pass

def append_chat(self, role, message):
    """è¿½åŠ èŠå¤©æ¶ˆæ¯"""
    self.chat_history.config(state=tk.NORMAL)
    self.chat_history.insert(tk.END, f"\n{'='*50}\n")
    self.chat_history.insert(tk.END, f"ã€{role}ã€‘\n\n", "user" if role == "æ‚¨" else "ai")
    self.chat_history.insert(tk.END, f"{message}\n")
    self.chat_history.config(state=tk.DISABLED)
    self.chat_history.see(tk.END)
```

### å³é”®èœå•å¢å¼º

```python
def create_context_menu(self):
    """åˆ›å»ºå³é”®èœå•ï¼ˆå¢å¼ºAIåŠŸèƒ½ï¼‰"""
    self.context_menu = tk.Menu(self.log_text, tearoff=0)

    # åŸæœ‰åŠŸèƒ½
    self.context_menu.add_command(label="å¤åˆ¶", command=self.copy_selected)
    self.context_menu.add_command(label="å¯¼å‡ºé€‰ä¸­è¡Œ", command=self.export_selected)

    self.context_menu.add_separator()

    # AIåŠŸèƒ½å­èœå•
    ai_menu = tk.Menu(self.context_menu, tearoff=0)
    ai_menu.add_command(label="ğŸ¤– åˆ†ææ­¤æ—¥å¿—", command=self.ai_analyze_selected)
    ai_menu.add_command(label="ğŸ¤– è§£é‡Šé”™è¯¯åŸå› ", command=self.ai_explain_error)
    ai_menu.add_command(label="ğŸ¤– æŸ¥æ‰¾ç›¸å…³æ—¥å¿—", command=self.ai_find_related)
    ai_menu.add_command(label="ğŸ¤– æä¾›ä¿®å¤å»ºè®®", command=self.ai_suggest_fix)

    self.context_menu.add_cascade(label="AIåŠ©æ‰‹", menu=ai_menu)

    # ç»‘å®šå³é”®
    self.log_text.bind("<Button-3>", self.show_context_menu)
```

### AIè®¾ç½®å¯¹è¯æ¡†

```python
def show_ai_settings(self):
    """æ˜¾ç¤ºAIè®¾ç½®å¯¹è¯æ¡†"""
    dialog = tk.Toplevel(self)
    dialog.title("AIåŠ©æ‰‹è®¾ç½®")
    dialog.geometry("550x450")
    dialog.resizable(False, False)

    # ==================== AIæœåŠ¡é€‰æ‹© ====================
    ttk.Label(dialog, text="AIæœåŠ¡ï¼š").grid(row=0, column=0, sticky=tk.W, padx=10, pady=5)
    service_var = tk.StringVar(value=self.config.get('ai_service', 'Claude'))
    service_combo = ttk.Combobox(dialog, textvariable=service_var, width=35,
                                values=["Claude", "OpenAI", "Ollamaæœ¬åœ°"], state="readonly")
    service_combo.grid(row=0, column=1, sticky=tk.EW, padx=10, pady=5)

    # ==================== API Key ====================
    ttk.Label(dialog, text="API Keyï¼š").grid(row=1, column=0, sticky=tk.W, padx=10, pady=5)
    api_key_var = tk.StringVar(value=self.config.get('api_key', ''))
    api_key_entry = ttk.Entry(dialog, textvariable=api_key_var, show="*", width=35)
    api_key_entry.grid(row=1, column=1, sticky=tk.EW, padx=10, pady=5)

    # æ˜¾ç¤º/éšè—æŒ‰é’®
    def toggle_api_key():
        api_key_entry.config(show="" if show_key_var.get() else "*")

    show_key_var = tk.BooleanVar()
    ttk.Checkbutton(dialog, text="æ˜¾ç¤º", variable=show_key_var,
                   command=toggle_api_key).grid(row=1, column=2, padx=5)

    # ==================== æ¨¡å‹é€‰æ‹© ====================
    ttk.Label(dialog, text="æ¨¡å‹ï¼š").grid(row=2, column=0, sticky=tk.W, padx=10, pady=5)
    model_var = tk.StringVar(value=self.config.get('ai_model', 'claude-3-5-sonnet-20241022'))
    model_combo = ttk.Combobox(dialog, textvariable=model_var, width=35,
                              values=[
                                  "claude-3-5-sonnet-20241022 (æ¨è)",
                                  "claude-3-opus-20240229 (æœ€å¼º)",
                                  "gpt-4 (OpenAI)",
                                  "gpt-3.5-turbo (ç»æµ)",
                                  "llama3 (æœ¬åœ°å…è´¹)"
                              ], state="readonly")
    model_combo.grid(row=2, column=1, sticky=tk.EW, padx=10, pady=5)

    # ==================== è‡ªåŠ¨æ£€æµ‹é€‰é¡¹ ====================
    ttk.Separator(dialog, orient=tk.HORIZONTAL).grid(
        row=3, column=0, columnspan=3, sticky=tk.EW, padx=10, pady=10
    )

    auto_detect_var = tk.BooleanVar(value=self.config.get('auto_detect', True))
    ttk.Checkbutton(dialog, text="è‡ªåŠ¨æ£€æµ‹å´©æºƒå’Œé”™è¯¯ï¼ˆåŠ è½½æ—¥å¿—åï¼‰",
                   variable=auto_detect_var).grid(
                       row=4, column=0, columnspan=2, sticky=tk.W, padx=10, pady=5
                   )

    auto_summary_var = tk.BooleanVar(value=self.config.get('auto_summary', False))
    ttk.Checkbutton(dialog, text="è‡ªåŠ¨ç”Ÿæˆé—®é¢˜æ‘˜è¦ï¼ˆåŠ è½½æ—¥å¿—åï¼‰",
                   variable=auto_summary_var).grid(
                       row=5, column=0, columnspan=2, sticky=tk.W, padx=10, pady=5
                   )

    privacy_filter_var = tk.BooleanVar(value=self.config.get('privacy_filter', True))
    ttk.Checkbutton(dialog, text="å¯ç”¨éšç§è¿‡æ»¤ï¼ˆè‡ªåŠ¨ç§»é™¤Tokenã€å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼‰",
                   variable=privacy_filter_var).grid(
                       row=6, column=0, columnspan=2, sticky=tk.W, padx=10, pady=5
                   )

    # ==================== æµ‹è¯•è¿æ¥æŒ‰é’® ====================
    def test_connection():
        test_btn.config(state=tk.DISABLED, text="æµ‹è¯•ä¸­...")
        dialog.update()

        def _test():
            try:
                from gui.modules.ai_diagnosis.ai_client import AIClientFactory
                client = AIClientFactory.create(
                    service=service_var.get().split()[0],  # ç§»é™¤åç¼€ï¼ˆæ¨èï¼‰
                    api_key=api_key_var.get(),
                    model=model_var.get().split()[0]
                )
                response = client.ask("ä½ å¥½ï¼Œè¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ã€‚")
                dialog.after(0, lambda: messagebox.showinfo("æˆåŠŸ", f"AIæœåŠ¡è¿æ¥æˆåŠŸï¼\n\nå“åº”é¢„è§ˆï¼š\n{response[:100]}..."))
            except Exception as e:
                dialog.after(0, lambda: messagebox.showerror("å¤±è´¥", f"è¿æ¥å¤±è´¥ï¼š\n{str(e)}"))
            finally:
                dialog.after(0, lambda: test_btn.config(state=tk.NORMAL, text="æµ‹è¯•è¿æ¥"))

        threading.Thread(target=_test, daemon=True).start()

    test_btn = ttk.Button(dialog, text="æµ‹è¯•è¿æ¥", command=test_connection)
    test_btn.grid(row=7, column=0, columnspan=3, pady=10)

    # ==================== ä¿å­˜å’Œå–æ¶ˆæŒ‰é’® ====================
    btn_frame = ttk.Frame(dialog)
    btn_frame.grid(row=8, column=0, columnspan=3, pady=10)

    def save_settings():
        # ç§»é™¤æ¨¡å‹åç§°åç¼€
        model_value = model_var.get().split()[0]
        service_value = service_var.get().split()[0]

        self.config['ai_service'] = service_value
        self.config['api_key'] = api_key_var.get()
        self.config['ai_model'] = model_value
        self.config['auto_detect'] = auto_detect_var.get()
        self.config['auto_summary'] = auto_summary_var.get()
        self.config['privacy_filter'] = privacy_filter_var.get()

        # ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
        from gui.modules.ai_diagnosis.config import AIConfig
        AIConfig.save(self.config)

        messagebox.showinfo("æˆåŠŸ", "è®¾ç½®å·²ä¿å­˜ï¼")
        dialog.destroy()

    ttk.Button(btn_frame, text="ä¿å­˜", command=save_settings, width=15).pack(side=tk.LEFT, padx=5)
    ttk.Button(btn_frame, text="å–æ¶ˆ", command=dialog.destroy, width=15).pack(side=tk.LEFT, padx=5)
```

---

## ğŸ“¦ ä¾èµ–ç®¡ç†

### æ–°å¢ä¾èµ–

```txt
# AIæœåŠ¡å®¢æˆ·ç«¯
anthropic>=0.18.0          # Claude API (æ¨è)
openai>=1.12.0             # OpenAI API
ollama>=0.1.0              # æœ¬åœ°æ¨¡å‹ï¼ˆå¯é€‰ï¼Œå…è´¹ï¼‰

# ç”¨äºMarkdownæ¸²æŸ“ï¼ˆå¯é€‰ï¼‰
markdown>=3.5.0
pygments>=2.17.0           # ä»£ç é«˜äº®
```

### å®‰è£…å‘½ä»¤

```bash
# æ›´æ–°requirements.txt
pip install anthropic openai ollama markdown pygments

# æˆ–è€…
pip install -r requirements.txt
```

### æœ¬åœ°æ¨¡å‹å®‰è£…ï¼ˆOllama - å…è´¹æ–¹æ¡ˆï¼‰

```bash
# 1. å®‰è£…Ollama
brew install ollama  # macOS
# æˆ–ä» https://ollama.com ä¸‹è½½

# 2. å¯åŠ¨OllamaæœåŠ¡
ollama serve

# 3. ä¸‹è½½æ¨¡å‹
ollama pull llama3        # æ¨èï¼Œ8GB
ollama pull qwen2:7b      # ä¸­æ–‡å‹å¥½ï¼Œ7GB
ollama pull mistral       # ç»æµï¼Œ4GB
```

---

## ğŸ’° æˆæœ¬åˆ†æ

### Claude APIæˆæœ¬ï¼ˆæ¨èï¼‰

| é¡¹ç›® | è¾“å…¥æˆæœ¬ | è¾“å‡ºæˆæœ¬ | å•æ¬¡åˆ†ææˆæœ¬ |
|------|---------|---------|------------|
| Claude 3.5 Sonnet | $3/ç™¾ä¸‡token | $15/ç™¾ä¸‡token | ~$0.04 |
| Claude 3 Opus | $15/ç™¾ä¸‡token | $75/ç™¾ä¸‡token | ~$0.20 |

**æœˆåº¦æˆæœ¬ä¼°ç®—**ï¼ˆä¸­å‹å›¢é˜Ÿï¼‰ï¼š
- æ¯å¤©åˆ†æ10æ¬¡å´©æºƒ = $0.4/å¤©
- æ¯å¤©é—®ç­”20æ¬¡ = $0.3/å¤©
- **æœˆæˆæœ¬**: ~$21

### OpenAI APIæˆæœ¬

| é¡¹ç›® | è¾“å…¥æˆæœ¬ | è¾“å‡ºæˆæœ¬ | å•æ¬¡åˆ†ææˆæœ¬ |
|------|---------|---------|------------|
| GPT-4 | $10/ç™¾ä¸‡token | $30/ç™¾ä¸‡token | ~$0.12 |
| GPT-3.5 Turbo | $0.5/ç™¾ä¸‡token | $1.5/ç™¾ä¸‡token | ~$0.006 |

### é™ä½æˆæœ¬æ–¹æ¡ˆ

1. **æ™ºèƒ½ç¼“å­˜**ï¼šç›¸ä¼¼é—®é¢˜å¤ç”¨ç»“æœï¼ˆå‡å°‘50%è°ƒç”¨ï¼‰
2. **åˆ†çº§åˆ†æ**ï¼š
   - ç®€å•é—®é¢˜ â†’ GPT-3.5ï¼ˆ$0.006/æ¬¡ï¼‰
   - å¤æ‚å´©æºƒ â†’ Claude Sonnetï¼ˆ$0.04/æ¬¡ï¼‰
3. **æœ¬åœ°æ¨¡å‹**ï¼šOllama + Llama3ï¼ˆ**å®Œå…¨å…è´¹**ï¼Œé€‚åˆæ•æ„Ÿæ•°æ®ï¼‰
4. **æ‰¹é‡å¤„ç†**ï¼šåˆå¹¶å¤šä¸ªå°é—®é¢˜åˆ°ä¸€æ¬¡è¯·æ±‚

---

## ğŸ”’ éšç§å’Œå®‰å…¨

### æ•°æ®ä¿æŠ¤åŸåˆ™

1. **æœ¬åœ°ä¼˜å…ˆ**ï¼šæ—¥å¿—ä¸å®Œæ•´ä¸Šä¼ ï¼Œä»…å‘é€æ‘˜è¦
2. **æ•æ„Ÿä¿¡æ¯è¿‡æ»¤**ï¼šè‡ªåŠ¨ç§»é™¤Tokenã€å¯†é’¥ã€ç”¨æˆ·IDç­‰
3. **ç¦»çº¿æ¨¡å¼**ï¼šæ”¯æŒæœ¬åœ°Ollamaï¼Œå®Œå…¨ç¦»çº¿åˆ†æ
4. **ç”¨æˆ·æ§åˆ¶**ï¼šå¯é€‰æ‹©æ˜¯å¦å¯ç”¨éšç§è¿‡æ»¤

### éšç§è¿‡æ»¤å®ç°

```python
class PrivacyFilter:
    """éšç§ä¿¡æ¯è¿‡æ»¤å™¨"""

    PATTERNS = [
        # Tokenå’Œå¯†é’¥
        (r'token["\s:=]+([a-zA-Z0-9\-_]{20,})', 'TOKEN_***'),
        (r'api[_\s]?key["\s:=]+([a-zA-Z0-9\-_]{20,})', 'APIKEY_***'),
        (r'secret["\s:=]+([a-zA-Z0-9\-_]{20,})', 'SECRET_***'),

        # ç”¨æˆ·æ ‡è¯†
        (r'user[_\s]?id["\s:=]+(\d+)', 'USER_***'),
        (r'device[_\s]?id["\s:=]+([a-zA-Z0-9\-]+)', 'DEVICE_***'),

        # è”ç³»ä¿¡æ¯
        (r'\d{11}', 'PHONE_***'),                          # æ‰‹æœºå·
        (r'[\w\.-]+@[\w\.-]+\.\w+', 'EMAIL_***'),          # é‚®ç®±

        # IPåœ°å€
        (r'\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b', 'IP_***'),

        # èº«ä»½è¯å·
        (r'\b\d{17}[\dXx]\b', 'IDCARD_***'),
    ]

    def filter(self, text: str) -> str:
        """åº”ç”¨æ‰€æœ‰è¿‡æ»¤è§„åˆ™"""
        for pattern, replacement in self.PATTERNS:
            text = re.sub(pattern, replacement, text, flags=re.IGNORECASE)
        return text

    def filter_log_entries(self, entries: List[LogEntry]) -> List[LogEntry]:
        """æ‰¹é‡è¿‡æ»¤æ—¥å¿—æ¡ç›®"""
        filtered = []
        for entry in entries:
            filtered_entry = LogEntry(
                timestamp=entry.timestamp,
                level=entry.level,
                module=entry.module,
                content=self.filter(entry.content)
            )
            filtered.append(filtered_entry)
        return filtered
```

---

## ğŸ“Š æ•ˆæœé¢„æœŸ

### å¼€å‘æ•ˆç‡æå‡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å¹…åº¦ |
|------|--------|--------|---------|
| å´©æºƒé—®é¢˜å®šä½æ—¶é—´ | 30åˆ†é’Ÿ | 5åˆ†é’Ÿ | **83%** |
| æ€§èƒ½é—®é¢˜è¯†åˆ« | 1å°æ—¶ | 10åˆ†é’Ÿ | **83%** |
| æ–°æ‰‹ä¸Šæ‰‹æ—¶é—´ | 1å‘¨ | 1å¤© | **85%** |
| é—®é¢˜å¤ç°ç‡ | 60% | 90% | **50%** |

### ç”¨æˆ·ä»·å€¼

1. **å¿«é€Ÿæ­¢è¡€**ï¼šå´©æºƒé—®é¢˜1å°æ—¶å†…å®šä½å¹¶ç»™å‡ºä¿®å¤æ–¹æ¡ˆ
2. **å…¨é¢åˆ†æ**ï¼šä¸é—æ¼ä½é¢‘ä½†ä¸¥é‡çš„é—®é¢˜
3. **çŸ¥è¯†ä¼ æ‰¿**ï¼šAIåˆ†æç»“æœå¯ä½œä¸ºå›¢é˜ŸçŸ¥è¯†åº“
4. **é™ä½é—¨æ§›**ï¼šåˆçº§å¼€å‘è€…ä¹Ÿèƒ½å¿«é€Ÿå®šä½é—®é¢˜

---

## ğŸš€ å®æ–½è®¡åˆ’

### å¼€å‘é˜¶æ®µï¼ˆä¼°è®¡10-15å¤©ï¼‰

#### Phase 1: åŸºç¡€æ¶æ„ï¼ˆ2-3å¤©ï¼‰
- [x] åˆ›å»º `gui/modules/ai_diagnosis/` ç›®å½•ç»“æ„
- [ ] å®ç° `ai_client.py` AIæ¥å£é€‚é…å±‚
  - ClaudeClient
  - OpenAIClient
  - OllamaClient
  - AIClientFactory
- [ ] å®ç° `config.py` é…ç½®ç®¡ç†
  - åŠ è½½/ä¿å­˜é…ç½®æ–‡ä»¶
  - API Keyç®¡ç†
  - ç¯å¢ƒå˜é‡æ”¯æŒ

**äº¤ä»˜ç‰©**:
- å¯ç”¨çš„AIå®¢æˆ·ç«¯åº“
- é…ç½®ç®¡ç†ç³»ç»Ÿ
- å•å…ƒæµ‹è¯•

#### Phase 2: æ—¥å¿—é¢„å¤„ç†ï¼ˆ2-3å¤©ï¼‰
- [ ] å®ç° `log_preprocessor.py`
  - extract_crash_logs()
  - extract_error_patterns()
  - build_timeline()
  - summarize_logs()
- [ ] å®ç° `PrivacyFilter`
  - æ•æ„Ÿä¿¡æ¯è¯†åˆ«å’Œè¿‡æ»¤
  - é…ç½®åŒ–è¿‡æ»¤è§„åˆ™
- [ ] é›†æˆç°æœ‰çš„ `data_models.py` å’Œ `filter_search.py`

**äº¤ä»˜ç‰©**:
- æ—¥å¿—é¢„å¤„ç†å™¨
- éšç§è¿‡æ»¤å™¨
- å•å…ƒæµ‹è¯•

#### Phase 3: æç¤ºè¯å·¥ç¨‹ï¼ˆ2-3å¤©ï¼‰
- [ ] å®ç° `prompt_templates.py`
  - å´©æºƒåˆ†ææç¤ºè¯
  - æ€§èƒ½åˆ†ææç¤ºè¯
  - é—®é¢˜æ€»ç»“æç¤ºè¯
  - äº¤äº’å¼é—®ç­”æç¤ºè¯
  - é”™è¯¯è§£é‡Šæç¤ºè¯
- [ ] æç¤ºè¯è°ƒä¼˜å’Œæµ‹è¯•
  - å‡†ç¡®æ€§æµ‹è¯•
  - Tokenä¼˜åŒ–
  - å“åº”è´¨é‡è¯„ä¼°

**äº¤ä»˜ç‰©**:
- æç¤ºè¯æ¨¡æ¿åº“
- æµ‹è¯•ç”¨ä¾‹å’Œç»“æœ

#### Phase 4: UIé›†æˆï¼ˆ3-4å¤©ï¼‰
- [ ] åœ¨ä¸»ç¨‹åºä¸­æ·»åŠ AIåŠ©æ‰‹ä¾§è¾¹æ UI
  - å¯æŠ˜å é¢æ¿
  - å¿«æ·æ“ä½œæŒ‰é’®
  - å¯¹è¯ç•Œé¢
- [ ] å¢å¼ºå³é”®èœå•ï¼ˆæ·»åŠ AIåˆ†æé€‰é¡¹ï¼‰
- [ ] å®ç°AIè®¾ç½®å¯¹è¯æ¡†
- [ ] èœå•æ æ·»åŠ "AIåŠ©æ‰‹"èœå•

**äº¤ä»˜ç‰©**:
- å®Œæ•´çš„AIåŠ©æ‰‹UI
- å³é”®èœå•é›†æˆ
- AIè®¾ç½®ç•Œé¢

#### Phase 5: åŠŸèƒ½å®ç°ï¼ˆ2-3å¤©ï¼‰
- [ ] å®ç°å´©æºƒåˆ†æåŠŸèƒ½
- [ ] å®ç°æ€§èƒ½è¯Šæ–­åŠŸèƒ½
- [ ] å®ç°é—®é¢˜æ€»ç»“åŠŸèƒ½
- [ ] å®ç°æ™ºèƒ½æœç´¢åŠŸèƒ½
- [ ] å®ç°è‡ªç”±å¯¹è¯åŠŸèƒ½

**äº¤ä»˜ç‰©**:
- å®Œæ•´çš„AIåˆ†æåŠŸèƒ½
- å¼‚æ­¥å¤„ç†æœºåˆ¶
- é”™è¯¯å¤„ç†

#### Phase 6: æµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ2-3å¤©ï¼‰
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

**äº¤ä»˜ç‰©**:
- æµ‹è¯•æŠ¥å‘Š
- æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š
- ç”¨æˆ·æ–‡æ¡£
- CLAUDE.mdæ›´æ–°

### é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æ—¶é—´ | äº¤ä»˜ |
|--------|------|------|
| M1: åŸºç¡€å¯ç”¨ | ç¬¬7å¤© | AIå®¢æˆ·ç«¯ + é…ç½® + æ—¥å¿—é¢„å¤„ç† |
| M2: æ ¸å¿ƒåŠŸèƒ½ | ç¬¬12å¤© | UIé›†æˆ + å´©æºƒåˆ†æ + é—®é¢˜æ€»ç»“ |
| M3: å®Œæ•´ç‰ˆæœ¬ | ç¬¬15å¤© | æ‰€æœ‰åŠŸèƒ½ + æµ‹è¯• + æ–‡æ¡£ |

---

## ğŸ“ ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

#### 1. å®‰è£…ä¾èµ–

```bash
# æ›´æ–°requirements.txt
pip install anthropic openai

# æˆ–æœ¬åœ°å…è´¹æ–¹æ¡ˆ
brew install ollama
ollama pull llama3
```

#### 2. é…ç½®API Key

**æ–¹å¼ä¸€ï¼šGUIé…ç½®ï¼ˆæ¨èï¼‰**
```
èœå•æ  â†’ AIåŠ©æ‰‹ â†’ AIè®¾ç½®
è¾“å…¥API Key â†’ æµ‹è¯•è¿æ¥ â†’ ä¿å­˜
```

**æ–¹å¼äºŒï¼šç¯å¢ƒå˜é‡**
```bash
export ANTHROPIC_API_KEY="your_claude_key"
export OPENAI_API_KEY="your_openai_key"
```

#### 3. å¯åŠ¨ä¸»ç¨‹åº

```bash
./scripts/run_analyzer.sh
```

#### 4. ä½¿ç”¨AIåŠŸèƒ½

**å¿«æ·æ“ä½œ**ï¼š
- åŠ è½½æ—¥å¿—åï¼Œç‚¹å‡»å³ä¾§AIåŠ©æ‰‹é¢æ¿çš„"åˆ†æå´©æºƒ"æŒ‰é’®
- ç­‰å¾…å‡ ç§’ï¼ŒæŸ¥çœ‹AIåˆ†æç»“æœ

**è‡ªç”±å¯¹è¯**ï¼š
- åœ¨AIåŠ©æ‰‹é¢æ¿åº•éƒ¨è¾“å…¥æ¡†è¾“å…¥é—®é¢˜
- æŒ‰Enteræˆ–ç‚¹å‡»"å‘é€"
- AIä¼šåŸºäºå½“å‰æ—¥å¿—å›ç­”

**å³é”®åˆ†æ**ï¼š
- é€‰ä¸­æ„Ÿå…´è¶£çš„æ—¥å¿—è¡Œ
- å³é”® â†’ AIåŠ©æ‰‹ â†’ é€‰æ‹©åˆ†æç±»å‹
- æŸ¥çœ‹AIåˆ†æç»“æœ

### æœ€ä½³å®è·µ

1. **å…ˆè¿‡æ»¤ååˆ†æ**ï¼šä½¿ç”¨ç°æœ‰çš„è¿‡æ»¤åŠŸèƒ½ç¼©å°èŒƒå›´ï¼Œå†ç”¨AIæ·±åº¦åˆ†æ
2. **å–„ç”¨å¿«æ·æ“ä½œ**ï¼šå´©æºƒåˆ†æã€æ€§èƒ½è¯Šæ–­æ˜¯é¢„è®¾çš„ä¼˜åŒ–æç¤ºè¯ï¼Œæ•ˆæœæ›´å¥½
3. **æä¾›ä¸Šä¸‹æ–‡**ï¼šåœ¨è‡ªç”±å¯¹è¯ä¸­æè¿°é—®é¢˜æ—¶ï¼Œå°½é‡è¯¦ç»†
4. **ä¿å­˜é‡è¦ç»“æœ**ï¼šå¯¹è¯å†å²å¯å¤åˆ¶å¯¼å‡ºï¼Œå»ºè®®ä¿å­˜é‡è¦åˆ†æç»“æœ

### æ•…éšœæ’æŸ¥

**é—®é¢˜ï¼šAIæ— å“åº”**
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ£€æŸ¥API Keyæ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹çŠ¶æ€æ é”™è¯¯æç¤º

**é—®é¢˜ï¼šå“åº”è´¨é‡ä¸ä½³**
- å°è¯•åˆ‡æ¢åˆ°æ›´å¼ºçš„æ¨¡å‹ï¼ˆå¦‚Claude Opusï¼‰
- æä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯
- ä½¿ç”¨å¿«æ·æ“ä½œè€Œéè‡ªç”±å¯¹è¯

**é—®é¢˜ï¼šæˆæœ¬è¿‡é«˜**
- åˆ‡æ¢åˆ°GPT-3.5æˆ–æœ¬åœ°Ollama
- å…³é—­è‡ªåŠ¨æ£€æµ‹å’Œè‡ªåŠ¨æ‘˜è¦
- å…ˆæ‰‹åŠ¨è¿‡æ»¤æ—¥å¿—ï¼Œå‡å°‘åˆ†ææ•°æ®é‡

---

## ğŸ”® åç»­æ‰©å±•æ–¹å‘

### çŸ­æœŸæ‰©å±•ï¼ˆ3ä¸ªæœˆå†…ï¼‰

1. **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒè‹±æ–‡æ—¥å¿—åˆ†æ
2. **è‡ªå®šä¹‰æç¤ºè¯**ï¼šç”¨æˆ·å¯ç¼–è¾‘å’Œä¿å­˜è‡ªå·±çš„æç¤ºè¯æ¨¡æ¿
3. **å›¢é˜Ÿåä½œ**ï¼šåˆ†æç»“æœåˆ†äº«å’Œè¯„è®ºåŠŸèƒ½
4. **æŠ¥å‘Šå¯¼å‡º**ï¼šç”ŸæˆPDF/HTMLæ ¼å¼çš„è¯Šæ–­æŠ¥å‘Š

### é•¿æœŸæ„¿æ™¯ï¼ˆ6-12ä¸ªæœˆï¼‰

1. **é¢„æµ‹æ€§åˆ†æ**ï¼šæ ¹æ®å†å²æ—¥å¿—é¢„æµ‹æ½œåœ¨é—®é¢˜
2. **è‡ªåŠ¨ä¿®å¤å»ºè®®**ï¼šç”ŸæˆPRçº§åˆ«çš„ä»£ç ä¿®å¤
3. **é›†æˆCI/CD**ï¼šè‡ªåŠ¨åˆ†ææµ‹è¯•ç¯å¢ƒæ—¥å¿—ï¼Œæå‰å‘ç°é—®é¢˜
4. **ç§»åŠ¨ç«¯æ”¯æŒ**ï¼šå¼€å‘ç§»åŠ¨ç«¯æŸ¥çœ‹è¯Šæ–­æŠ¥å‘Š
5. **çŸ¥è¯†åº“ç³»ç»Ÿ**ï¼šç§¯ç´¯é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œå½¢æˆå›¢é˜ŸçŸ¥è¯†åº“

---

## ğŸ“š å‚è€ƒèµ„æ–™

### APIæ–‡æ¡£
- [Anthropic Claude API](https://docs.anthropic.com/claude/reference/getting-started-with-the-api)
- [OpenAI API](https://platform.openai.com/docs/api-reference)
- [Ollama Documentation](https://github.com/ollama/ollama/tree/main/docs)

### æç¤ºè¯å·¥ç¨‹
- [Anthropic Prompt Engineering Guide](https://docs.anthropic.com/claude/docs/prompt-engineering)
- [OpenAI Best Practices](https://platform.openai.com/docs/guides/prompt-engineering)

### ç›¸ä¼¼äº§å“ç ”ç©¶
- **Sentry**ï¼šå´©æºƒèšåˆå’Œåˆ†æ
- **Firebase Crashlytics**ï¼šç§»åŠ¨åº”ç”¨å´©æºƒæŠ¥å‘Š
- **Datadog**ï¼šæ—¥å¿—èšåˆå’ŒAIåˆ†æ

---

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|------|---------|
| v1.0 | 2025-10-16 | åˆç‰ˆè®¾è®¡æ–‡æ¡£ï¼Œå®Œæ•´çš„AIé›†æˆæ–¹æ¡ˆ |

---

## âœ… æ€»ç»“

è¿™æ˜¯ä¸€ä¸ª**å®Œå…¨å¯è½åœ°**çš„AIé›†æˆæ–¹æ¡ˆï¼Œæ ¸å¿ƒä¼˜åŠ¿ï¼š

1. âœ… **æ— ä¾µå…¥é›†æˆ**ï¼šä¸ç°æœ‰æ¶æ„å®Œç¾èåˆï¼Œä¸æ”¹å˜ä»»ä½•ç°æœ‰åŠŸèƒ½
2. âœ… **æ¸è¿›å¼å¼€å‘**ï¼šå¯åˆ†é˜¶æ®µå®æ–½ï¼Œå¿«é€ŸéªŒè¯ï¼Œé™ä½é£é™©
3. âœ… **æˆæœ¬å¯æ§**ï¼šæœˆæˆæœ¬<$50ï¼ˆä¸­å°å›¢é˜Ÿï¼‰ï¼Œæ”¯æŒå…è´¹æœ¬åœ°æ¨¡å‹
4. âœ… **éšç§å®‰å…¨**ï¼šæ”¯æŒæœ¬åœ°éƒ¨ç½²å’Œç¦»çº¿æ¨¡å¼ï¼Œæ•æ„Ÿä¿¡æ¯è‡ªåŠ¨è¿‡æ»¤
5. âœ… **ç”¨æˆ·ä»·å€¼æ˜ç¡®**ï¼šé—®é¢˜å®šä½æ•ˆç‡æå‡83%ï¼Œæ–°æ‰‹ä¸Šæ‰‹æ—¶é—´ç¼©çŸ­85%

**å»ºè®®ä¼˜å…ˆçº§**ï¼š
- Phase 1ï¼ˆåŸºç¡€æ¶æ„ï¼‰â†’ Phase 2ï¼ˆæ—¥å¿—é¢„å¤„ç†ï¼‰â†’ Phase 3ï¼ˆæç¤ºè¯å·¥ç¨‹ï¼‰
- å…ˆè·‘é€šåŸºç¡€æµç¨‹ï¼ŒéªŒè¯å¯è¡Œæ€§ï¼Œå†å®Œå–„UIå’Œä½“éªŒ

**é¢„è®¡å¼€å‘å‘¨æœŸ**ï¼š10-15å¤©ï¼ˆå•äººå¼€å‘ï¼‰

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- é¡¹ç›®Issueï¼šhttps://github.com/yourproject/issues
- é‚®ç®±ï¼šdev@example.com
